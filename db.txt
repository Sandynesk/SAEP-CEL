CREATE DATABASE SAEPDB;
USE SAEPDB;

CREATE TABLE cadastro (
    id INT AUTO_INCREMENT PRIMARY KEY,   -- Chave primária que incrementa automaticamente
    nome VARCHAR(255) NOT NULL,           -- Coluna para armazenar o nome (máximo de 255 caracteres)
    email VARCHAR(255) NOT NULL UNIQUE,   -- Coluna para armazenar o email (com restrição de valor único)
    idade INT NOT NULL,                   -- Coluna para armazenar a idade (tipo inteiro)
    endereco VARCHAR(255) NOT NULL,       -- Coluna para armazenar o endereço
    senha VARCHAR(255) NOT NULL          -- Coluna para armazenar a senha
);

CREATE TABLE posts (
    id INT AUTO_INCREMENT PRIMARY KEY,        -- Chave primária que incrementa automaticamente
    title VARCHAR(255) NOT NULL,              -- Título do post
    content TEXT NOT NULL,                    -- Conteúdo do post
    author_id INT,                            -- ID do autor (assumindo que você tem uma tabela de autores)
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP, -- Data e hora de criação do post (adicionada)
    FOREIGN KEY (author_id) REFERENCES cadastro(id)  -- Definindo chave estrangeira
);


-- Verifica os dados das tabelas
SELECT * FROM cadastro;
SELECT * FROM posts;
DESCRIBE posts;

ALTER TABLE posts
ADD created_at DATETIME DEFAULT CURRENT_TIMESTAMP;

SELECT p.id, p.title, p.content, p.created_at, u.nome AS author_name 
FROM posts p 
JOIN cadastro u ON p.author_id = u.id 
ORDER BY p.created_at DESC;
